<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Linux 组 raid 1 | Admsec 的博客</title><meta name="author" content="Admsec"><meta name="copyright" content="Admsec"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Linux 组 raid 1简述 服务器环境   Debian GNU&#x2F;Linux 12 (bookworm)   前段时间在家翻箱子翻到了两块 14 年的机械硬盘，一块是西数的蓝盘，另一块是 seg 什么的，不知道是什么牌子，反正放着也是放着，思来想去，想用来当自己的储存服务器，储存一些需要持久化储存的数据，例如照片、视频或者一些比较重要的数据什么的 实话说这两块硬盘不是很敢用，什么时">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux 组 raid 1">
<meta property="og:url" content="https://blog.freeaes.com/2025/07/13/Linux-%E7%BB%84-raid-1/index.html">
<meta property="og:site_name" content="Admsec 的博客">
<meta property="og:description" content="Linux 组 raid 1简述 服务器环境   Debian GNU&#x2F;Linux 12 (bookworm)   前段时间在家翻箱子翻到了两块 14 年的机械硬盘，一块是西数的蓝盘，另一块是 seg 什么的，不知道是什么牌子，反正放着也是放着，思来想去，想用来当自己的储存服务器，储存一些需要持久化储存的数据，例如照片、视频或者一些比较重要的数据什么的 实话说这两块硬盘不是很敢用，什么时">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://bu.dusays.com/2025/07/13/68732bdb638ac.jpg">
<meta property="article:published_time" content="2025-07-13T03:04:19.829Z">
<meta property="article:modified_time" content="2025-07-13T07:28:52.801Z">
<meta property="article:author" content="Admsec">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="raid">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://bu.dusays.com/2025/07/13/68732bdb638ac.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Linux 组 raid 1",
  "url": "https://blog.freeaes.com/2025/07/13/Linux-%E7%BB%84-raid-1/",
  "image": "https://bu.dusays.com/2025/07/13/68732bdb638ac.jpg",
  "datePublished": "2025-07-13T03:04:19.829Z",
  "dateModified": "2025-07-13T07:28:52.801Z",
  "author": [
    {
      "@type": "Person",
      "name": "Admsec",
      "url": "https://blog.admsec223.cn"
    }
  ]
}</script><link rel="shortcut icon" href="/imgs/favicon.ico"><link rel="canonical" href="https://blog.freeaes.com/2025/07/13/Linux-%E7%BB%84-raid-1/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')

          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"已切换为繁体中文","cht_to_chs":"已切换为简体中文","day_to_night":"已切换为深色模式","night_to_day":"已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-center"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyloadPlugin: false,
  isAnchor: true,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux 组 raid 1',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/imgs/avatar_default.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">2</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-home"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo/"><i class="fa-fw fa-solid fa-comments"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Admsec 的博客</span></a><a class="nav-page-title" href="/"><span class="site-name">Linux 组 raid 1</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-home"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo/"><i class="fa-fw fa-solid fa-comments"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Linux 组 raid 1</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-07-13T03:04:19.829Z" title="发表于 2025-07-13 11:04:19">2025-07-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-07-13T07:28:52.801Z" title="更新于 2025-07-13 15:28:52">2025-07-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/raid/">raid</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">1.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>8分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="container post-content" id="article-container"><h1 id="Linux-组-raid-1"><a href="#Linux-组-raid-1" class="headerlink" title="Linux 组 raid 1"></a>Linux 组 raid 1</h1><h2 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h2><ul>
<li><p>服务器环境</p>
<p>  Debian GNU&#x2F;Linux 12 (bookworm)</p>
</li>
</ul>
<p>前段时间在家翻箱子翻到了两块 14 年的机械硬盘，一块是西数的蓝盘，另一块是 seg 什么的，不知道是什么牌子，反正放着也是放着，思来想去，想用来当自己的储存服务器，储存一些需要持久化储存的数据，例如照片、视频或者一些比较重要的数据什么的</p>
<p>实话说这两块硬盘不是很敢用，什么时候突然暴毙就完蛋了，但是突然又想起了之前在微信公众号看到的一种技术方式——磁盘冗余阵列，根据各个 raid 等级可以用两个或多个硬盘组成不同的效果，可以让自己的数据储存的更放心一些，所以也就有了这篇文章</p>
<p>这篇文章我想记录一下组 raid 1 的过程以及踩坑记录，希望能不翻车。</p>
<h2 id="安装-mdadm"><a href="#安装-mdadm" class="headerlink" title="安装 mdadm"></a>安装 mdadm</h2><p>Mdadm 是管理 Linux 上软件 RAID 的实用程序。它在所有主要发行版中都可用。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update &amp;&amp; <span class="built_in">sudo</span> apt-get install mdadm</span><br></pre></td></tr></table></figure>

<p>首先看一下我的两个机械硬盘属于被识别为什么名字，其中 sdc 是我的两个机械硬盘，之前装飞牛 nas 遗留的 raid 0，还没有怎么处理它</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># lsblk</span></span><br><span class="line">NAME                                              MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINTS</span><br><span class="line">sda                                                 8:0    0 931.5G  0 disk</span><br><span class="line">└─sda1                                              8:1    0 931.5G  0 part</span><br><span class="line">  └─md127                                           9:127  0   1.8T  0 raid0</span><br><span class="line">    └─trim_53fde9e3_abc8_4c19_9692_c236b5ce6dcf-0 254:2    0   1.8T  0 lvm</span><br><span class="line">sdb                                                 8:16   0 119.2G  0 disk</span><br><span class="line">├─sdb1                                              8:17   0   512M  0 part  /boot/efi</span><br><span class="line">├─sdb2                                              8:18   0   488M  0 part  /boot</span><br><span class="line">└─sdb3                                              8:19   0 118.3G  0 part</span><br><span class="line">  ├─Rubbish--computer--vg-root                    254:0    0     1T  0 lvm   /</span><br><span class="line">  └─Rubbish--computer--vg-swap_1                  254:1    0   980M  0 lvm   [SWAP]</span><br><span class="line">sdc                                                 8:32   0 931.5G  0 disk</span><br><span class="line">└─sdc1                                              8:33   0 931.5G  0 part</span><br><span class="line">  └─md127                                           9:127  0   1.8T  0 raid0</span><br><span class="line">    └─trim_53fde9e3_abc8_4c19_9692_c236b5ce6dcf-0 254:2    0   1.8T  0 lvm</span><br><span class="line">nvme0n1                                           259:0    0 931.5G  0 disk</span><br><span class="line">└─nvme0n1p1                                       259:1    0 931.5G  0 part</span><br><span class="line">  └─Rubbish--computer--vg-root                    254:0    0     1T  0 lvm   /</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="卸载原来的-raid-0"><a href="#卸载原来的-raid-0" class="headerlink" title="卸载原来的 raid 0"></a>卸载原来的 raid 0</h2><p>直接给 sda 和 sdc 重新分区就好了</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fdisk /dev/sda</span><br><span class="line">// 按 n，一直回车，然后按 w 保存</span><br><span class="line">fdisk /dev/sdc</span><br><span class="line">// 同上</span><br></pre></td></tr></table></figure>

<p>操作完之后重启一下，输入 lsblk 就变成了这样</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">root@Rubbish-computer:~# lsblk</span><br><span class="line">NAME                             MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS</span><br><span class="line">sda                                8:0    0 931.5G  0 disk</span><br><span class="line">└─sda1                             8:1    0 931.5G  0 part</span><br><span class="line">sdb                                8:16   0 119.2G  0 disk</span><br><span class="line">├─sdb1                             8:17   0   512M  0 part /boot/efi</span><br><span class="line">├─sdb2                             8:18   0   488M  0 part /boot</span><br><span class="line">└─sdb3                             8:19   0 118.3G  0 part</span><br><span class="line">  ├─Rubbish--computer--vg-root   254:0    0     1T  0 lvm  /</span><br><span class="line">  └─Rubbish--computer--vg-swap_1 254:1    0   980M  0 lvm  [SWAP]</span><br><span class="line">sdc                                8:32   0 931.5G  0 disk</span><br><span class="line">└─sdc1                             8:33   0 931.5G  0 part</span><br><span class="line">nvme0n1                          259:0    0 931.5G  0 disk</span><br><span class="line">└─nvme0n1p1                      259:1    0 931.5G  0 part</span><br><span class="line">  └─Rubbish--computer--vg-root   254:0    0     1T  0 lvm  /</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="组-raid-1"><a href="#组-raid-1" class="headerlink" title="组 raid 1"></a>组 raid 1</h2><p>照着输命令，这个命令的意思是在 md1 上创建 raid1，然后选择硬盘</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">mdadm --create --verbose /dev/md1 --level=1 --raid-devices=2 /dev/sda1 /dev/sdc1</span><br><span class="line">// 有选项就输 y</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">root@Rubbish-computer:~# lsblk</span><br><span class="line">NAME                             MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINTS</span><br><span class="line">sda                                8:0    0 931.5G  0 disk</span><br><span class="line">└─sda1                             8:1    0 931.5G  0 part</span><br><span class="line">  └─md1                            9:1    0 931.4G  0 raid1</span><br><span class="line">sdb                                8:16   0 119.2G  0 disk</span><br><span class="line">├─sdb1                             8:17   0   512M  0 part  /boot/efi</span><br><span class="line">├─sdb2                             8:18   0   488M  0 part  /boot</span><br><span class="line">└─sdb3                             8:19   0 118.3G  0 part</span><br><span class="line">  ├─Rubbish--computer--vg-root   254:0    0     1T  0 lvm   /</span><br><span class="line">  └─Rubbish--computer--vg-swap_1 254:1    0   980M  0 lvm   [SWAP]</span><br><span class="line">sdc                                8:32   0 931.5G  0 disk</span><br><span class="line">└─sdc1                             8:33   0 931.5G  0 part</span><br><span class="line">  └─md1                            9:1    0 931.4G  0 raid1</span><br><span class="line">nvme0n1                          259:0    0 931.5G  0 disk</span><br><span class="line">└─nvme0n1p1                      259:1    0 931.5G  0 part</span><br><span class="line">  └─Rubbish--computer--vg-root   254:0    0     1T  0 lvm   /</span><br><span class="line">root@Rubbish-computer:~# fdisk /dev/m</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>给 md1 新建分区</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fdisk /dev/md1</span><br><span class="line">// 依次输入: n -&gt; 回车 -&gt; 回车 -&gt; 回车  w</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">root@Rubbish-computer:~# lsblk</span><br><span class="line">NAME                             MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINTS</span><br><span class="line">sda                                8:0    0 931.5G  0 disk</span><br><span class="line">└─sda1                             8:1    0 931.5G  0 part</span><br><span class="line">  └─md1                            9:1    0 931.4G  0 raid1</span><br><span class="line">    └─md1p1                      259:2    0 931.4G  0 part</span><br><span class="line">sdb                                8:16   0 119.2G  0 disk</span><br><span class="line">├─sdb1                             8:17   0   512M  0 part  /boot/efi</span><br><span class="line">├─sdb2                             8:18   0   488M  0 part  /boot</span><br><span class="line">└─sdb3                             8:19   0 118.3G  0 part</span><br><span class="line">  ├─Rubbish--computer--vg-root   254:0    0     1T  0 lvm   /</span><br><span class="line">  └─Rubbish--computer--vg-swap_1 254:1    0   980M  0 lvm   [SWAP]</span><br><span class="line">sdc                                8:32   0 931.5G  0 disk</span><br><span class="line">└─sdc1                             8:33   0 931.5G  0 part</span><br><span class="line">  └─md1                            9:1    0 931.4G  0 raid1</span><br><span class="line">    └─md1p1                      259:2    0 931.4G  0 part</span><br><span class="line">nvme0n1                          259:0    0 931.5G  0 disk</span><br><span class="line">└─nvme0n1p1                      259:1    0 931.5G  0 part</span><br><span class="line">  └─Rubbish--computer--vg-root   254:0    0     1T  0 lvm   /</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>格式化 md1p1，格式为 ext4</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"> mkfs.ext4 /dev/md1p1</span><br><span class="line"> <span class="built_in">mkdir</span> /mechanical_raid1</span><br><span class="line">mount /dev/md1p1 /mnt/mechanical_raid1/</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">root@Rubbish-computer:~# lsblk</span><br><span class="line">NAME                             MAJ:MIN RM   SIZE RO TYPE  MOUNTPOINTS</span><br><span class="line">sda                                8:0    0 931.5G  0 disk</span><br><span class="line">└─sda1                             8:1    0 931.5G  0 part</span><br><span class="line">  └─md1                            9:1    0 931.4G  0 raid1</span><br><span class="line">    └─md1p1                      259:2    0 931.4G  0 part  /mnt/mechanical_raid1</span><br><span class="line">sdb                                8:16   0 119.2G  0 disk</span><br><span class="line">├─sdb1                             8:17   0   512M  0 part  /boot/efi</span><br><span class="line">├─sdb2                             8:18   0   488M  0 part  /boot</span><br><span class="line">└─sdb3                             8:19   0 118.3G  0 part</span><br><span class="line">  ├─Rubbish--computer--vg-root   254:0    0     1T  0 lvm   /</span><br><span class="line">  └─Rubbish--computer--vg-swap_1 254:1    0   980M  0 lvm   [SWAP]</span><br><span class="line">sdc                                8:32   0 931.5G  0 disk</span><br><span class="line">└─sdc1                             8:33   0 931.5G  0 part</span><br><span class="line">  └─md1                            9:1    0 931.4G  0 raid1</span><br><span class="line">    └─md1p1                      259:2    0 931.4G  0 part  /mnt/mechanical_raid1</span><br><span class="line">nvme0n1                          259:0    0 931.5G  0 disk</span><br><span class="line">└─nvme0n1p1                      259:1    0 931.5G  0 part</span><br><span class="line">  └─Rubbish--computer--vg-root   254:0    0     1T  0 lvm   /</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="配置开机挂载"><a href="#配置开机挂载" class="headerlink" title="配置开机挂载"></a>配置开机挂载</h2><p>查找 md1p1 的 UUID</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">root@Rubbish-computer:~# blkid</span><br><span class="line">/dev/mapper/Rubbish--computer--vg-swap_1: UUID=<span class="string">&quot;311186db-54d9-4e03-93b7-b2fa17b058f2&quot;</span> TYPE=<span class="string">&quot;swap&quot;</span></span><br><span class="line">/dev/nvme0n1p1: UUID=<span class="string">&quot;dm0hnz-6587-hDDp-kYup-OmtG-Mhp3-U23iZd&quot;</span> TYPE=<span class="string">&quot;LVM2_member&quot;</span> PARTUUID=<span class="string">&quot;f482e853-4f6b-3f48-9194-b574a2f2c6bd&quot;</span></span><br><span class="line">/dev/sdb2: UUID=<span class="string">&quot;c3c94fc5-5d17-44b7-ae10-122a34d801a3&quot;</span> BLOCK_SIZE=<span class="string">&quot;1024&quot;</span> TYPE=<span class="string">&quot;ext2&quot;</span> PARTUUID=<span class="string">&quot;5e0ac597-ccdd-496c-a33c-7b8f149fb276&quot;</span></span><br><span class="line">/dev/sdb3: UUID=<span class="string">&quot;90TQiF-6KDn-p4Eq-ZSXA-x4oA-Xq7Q-2SJF7t&quot;</span> TYPE=<span class="string">&quot;LVM2_member&quot;</span> PARTUUID=<span class="string">&quot;acc67b2c-f279-47d0-868c-89266ec5e3f1&quot;</span></span><br><span class="line">/dev/sdb1: UUID=<span class="string">&quot;2D83-6E26&quot;</span> BLOCK_SIZE=<span class="string">&quot;512&quot;</span> TYPE=<span class="string">&quot;vfat&quot;</span> PARTLABEL=<span class="string">&quot;EFI System Partition&quot;</span> PARTUUID=<span class="string">&quot;e0896f57-66c5-48ad-b51e-02fef04220f5&quot;</span></span><br><span class="line">/dev/mapper/Rubbish--computer--vg-root: UUID=<span class="string">&quot;91903da8-e448-4de6-abcf-2cc73d9ba92b&quot;</span> BLOCK_SIZE=<span class="string">&quot;4096&quot;</span> TYPE=<span class="string">&quot;ext4&quot;</span></span><br><span class="line">/dev/sdc1: UUID=<span class="string">&quot;23ec7260-b69e-aa05-96f8-f8393bee6722&quot;</span> UUID_SUB=<span class="string">&quot;64da14d7-8eb0-086a-eb46-a8948a5279cb&quot;</span> LABEL=<span class="string">&quot;Rubbish-computer:1&quot;</span> TYPE=<span class="string">&quot;linux_raid_member&quot;</span> PARTUUID=<span class="string">&quot;578b58f0-9d0c-1f4c-8dec-7f66b139dbe7&quot;</span></span><br><span class="line">/dev/sda1: UUID=<span class="string">&quot;23ec7260-b69e-aa05-96f8-f8393bee6722&quot;</span> UUID_SUB=<span class="string">&quot;3aa7b1db-83d0-81b2-a348-9de1b6035f40&quot;</span> LABEL=<span class="string">&quot;Rubbish-computer:1&quot;</span> TYPE=<span class="string">&quot;linux_raid_member&quot;</span> PARTUUID=<span class="string">&quot;71010802-ffff-df40-9b00-c0fdfb035a22&quot;</span></span><br><span class="line">/dev/md1p1: UUID=<span class="string">&quot;a637a848-0aec-4423-808c-fae7f5bb022a&quot;</span> BLOCK_SIZE=<span class="string">&quot;4096&quot;</span> TYPE=<span class="string">&quot;ext4&quot;</span> PARTUUID=<span class="string">&quot;e2da37e8-01&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>修改配置文件，a637a848-0aec-4423-808c-fae7f5bb022a 是md1p1 的UUID</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">vim /etc/fstab</span><br><span class="line"></span><br><span class="line">// 末尾添加下面这行，这个条目告诉系统在启动时将 UUID 为 </span><br><span class="line">// 5607a174-cfb3-476f-b509-a0e2e5f9654b 的 ext4 文件系统挂载到 /mnt/mechanical_raid1目录，</span><br><span class="line">// 使用默认挂载选项，不需要备份，并在启动时进行文件系统检查（在根文件系统之后）。</span><br><span class="line">	UUID=a637a848-0aec-4423-808c-fae7f5bb022a /mnt/mechanical_raid1 ext4 defaults 0 2</span><br></pre></td></tr></table></figure>

<h2 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h2><p>为什么 916G 的总可用空间，只有 870G  可用？</p>
<p>因为默认情况下 ext4 保留约5%的空间给 root 用户(防止普通用户占满内存导致系统问题)，解决方式：将5%的保留空间调整到1%</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sudo</span> tune2fs -m 1 /dev/md127p1  <span class="comment"># 将保留空间从 5% 改为 1%</span></span><br><span class="line"><span class="built_in">sudo</span> mount -o remount /mnt/mechanical_raid1  <span class="comment"># 重新挂载生效</span></span><br><span class="line"><span class="built_in">df</span> -h  <span class="comment"># 检查可用空间是否增加</span></span><br></pre></td></tr></table></figure>

<p>调整后可用空间来到了 907G</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://blog.admsec223.cn">Admsec</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://blog.freeaes.com/2025/07/13/Linux-%E7%BB%84-raid-1/">https://blog.freeaes.com/2025/07/13/Linux-%E7%BB%84-raid-1/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.freeaes.com" target="_blank">Admsec 的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a><a class="post-meta__tags" href="/tags/raid/">raid</a></div><div class="post-share"><div class="social-share" data-image="https://bu.dusays.com/2025/07/13/68732bdb638ac.jpg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2025/07/13/hello-world/" title="Hello World"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Hello World</div></div><div class="info-2"><div class="info-item-1">Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post$ hexo new &quot;My New Post&quot;  More info: Writing Run server$ hexo server  More info: Server Generate static files$ hexo generate  More info: Generating Deploy to remote sites$ hexo deploy  More info: Deployment </div></div></div></a></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux-%E7%BB%84-raid-1"><span class="toc-number">1.</span> <span class="toc-text">Linux 组 raid 1</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">简述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-mdadm"><span class="toc-number">1.2.</span> <span class="toc-text">安装 mdadm</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%B8%E8%BD%BD%E5%8E%9F%E6%9D%A5%E7%9A%84-raid-0"><span class="toc-number">1.3.</span> <span class="toc-text">卸载原来的 raid 0</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84-raid-1"><span class="toc-number">1.4.</span> <span class="toc-text">组 raid 1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%BC%80%E6%9C%BA%E6%8C%82%E8%BD%BD"><span class="toc-number">1.5.</span> <span class="toc-text">配置开机挂载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%93%E5%B1%95"><span class="toc-number">1.6.</span> <span class="toc-text">拓展</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background: transparent;"><div class="footer-flex"><div class="footer-flex-items"><div class="footer-flex-item"><div class="footer-flex-title">框架</div><div class="footer-flex-content"><a href="https://hexo.io/zh-cn/" target="_blank" title="⚡️ Hexo">⚡️ Hexo</a><a href="https://butterfly.js.org/" target="_blank" title="🚀 Butterfly">🚀 Butterfly</a></div></div></div></div><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By Admsec</span><span class="framework-info"><span class="footer-separator">|</span><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.1</a></span></div><div class="footer_custom_text"><a href="icp链接"><img class="icp-icon" src="/imgs/gab.png"><span>粤公网安备111xxxxxx</span> | <a href="icp链接"><span>粤icp备111</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.1"></script><script src="/js/main.js?v=5.5.1"></script><script src="/js/tw_cn.js?v=5.5.1"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@6.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar@0.1.16/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.freeaes.com/',
      region: 'ap-guangdong',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://twikoo.freeaes.com/',
      region: 'ap-guangdong',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('https://cdn.jsdelivr.net/npm/twikoo@1.6.44/dist/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => {
      try {
        fn()
      } catch (err) {
        console.debug('Pjax callback failed:', err)
      }
    })
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      const usePjax = true
      true
        ? (usePjax ? pjax.loadUrl('/404.html') : window.location.href = '/404.html')
        : window.location.href = e.request.responseURL
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden="hidden"></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"/></div><hr/><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none;"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=5.5.1"></script></div></div></body></html>